function idSetInterval(){if($(".body").length)var e=0,a=setInterval(function(){$(".body").height()<$(window).outerHeight(!0)&&$(".w-main").css("min-height",$(window).outerHeight(!0)-$(".body").outerHeight(!0)+$(".w-main").outerHeight(!0)+"px"),1e3<e++&&clearInterval(a)},1)}$(function(){$(".g-add-member-collections").click(function(){0<$(this).data("collectionid")&&productAddCollection($(this).data("collectionid"))}),function(r){if("Microsoft Internet Explorer"==navigator.appName&&"MSIE7.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")){var t=/WIDTH: ([0-9\.]+)%/;r(".multi-imgs").each(function(e){var a=r(this).find("ul>li");if(t.test(a.attr("style"))&&!isNaN(parseFloat(r.trim(RegExp.$1)))){var n=parseFloat(r.trim(RegExp.$1))-.1+"%";a.css({width:n}),a.each(function(){var e=r(this);e.find("img").click(function(){e.find(".gallery-caption").click()})})}})}}(jQuery),$("img").error(function(){$(this).attr("src","/skin/img/ma.jpg")}),browser.versions.mobile||(idSetInterval(),$(window).resize(function(){idSetInterval()}))}),function(e,a){e(window).width()<=767&&0<e(".prddetail_foot_fixed").length&&0<e(".w-footer-in").length&&e(".w-footer-in").height()<1&&e(".news-others").css("padding-bottom",e(".prddetail_foot_fixed").height()+"px")}(jQuery);var browser={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Adr"),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad"),webApp:-1==e.indexOf("Safari"),weixin:-1<e.indexOf("MicroMessenger"),qq:" qq"==e.match(/\sQQ/i)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};function productAddCollection(e){$.ajax({type:"POST",url:ajaxUrlMemberAddCollection,data:{id:e},dataType:"json",success:function(e){return"success"!==e._return&&"110"==e.code?ajaxError():("success"!==e._return&&"1"==e.code&&gotoMemberLoginPage(),"success"!==e._return&&"2"==e.code?(layer.alert($.languagePack(e.language),function(e){window.location.reload(),layer.close(e)}),""):"success"!==e._return&&""!==e.message?("1"==e.code?layer.alert(e.message,function(e){window.location.href=$.ajaxUrl("memberLoginUrl"),layer.close(e)}):layer.alert(e.message,function(e){layer.close(e)}),!1):void("success"===e._return&&("add"===e.action?($(".fa-star-o").each(function(e){$(this).removeClass("fa-star-o").addClass("fa-star")}),e.language?layer.alert(languagePack(e.language),function(e){layer.close(e)}):layer.alert(languagePack("hasBeenSuccessfullyAddedToTheFavoritesList"),function(e){layer.close(e)})):"del"===e.action?($(".fa-star").each(function(e){$(this).removeClass("fa-star").addClass("fa-star-o")}),e.language?layer.alert(languagePack(e.language),function(e){layer.close(e)}):layer.alert(languagePack("hasBeenSuccessfullyDeletedToTheFavoritesList"),function(e){layer.close(e)})):($(".fa-star-o").each(function(e){$(this).removeClass("fa-star-o").addClass("fa-star")}),layer.alert(languagePack("hasBeenSuccessfullyAddedToTheFavoritesList"),function(e){layer.close(e)})))))},error:function(){return ajaxError()}})}function isUserLogin(){var a=!1;return $.ajax({type:"POST",url:ajaxMemberIsLogin,data:{},async:!1,dataType:"json",success:function(e){return"success"===e._return&&(a=!0),a},error:function(){return ajaxError()}}),a}function ajaxError(){return layer.alert(languagePack("illegalOperation"),function(e){layer.close(e)}),!1}function clickCart(a){a=$.extend({link:""},a),!1===isUserLogin()&&layer.alert(languagePack("noLoginMessage"),function(e){location.href=$.ajaxUrl("memberLoginUrl")+a.link,layer.close(e)})}function implode(e,a){var n="",r="",t="";if(1===arguments.length&&(a=e,e=""),"object"!=typeof a)return a;if("[object Array]"===Object.prototype.toString.call(a))return a.join(e);for(n in a)r+=t+a[n],t=e;return r}function explode(e,a,n){if(arguments.length<2||void 0===e||void 0===a)return null;if(""===e||!1===e||null===e)return!1;if("function"==typeof e||"object"==typeof e||"function"==typeof a||"object"==typeof a)return{0:""};!0===e&&(e="1");var r=(a+="").split(e+="");return void 0===n?r:(0===n&&(n=1),0<n?n>=r.length?r:r.slice(0,n-1).concat([r.slice(n-1).join(e)]):-n>=r.length?[]:(r.splice(r.length+n),r))}function number_format(e,a,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var t,i,o,l=isFinite(+e)?+e:0,c=isFinite(+a)?Math.abs(a):0,u=void 0===r?",":r,s=void 0===n?".":n,f="";return 3<(f=(c?(t=l,i=c,o=Math.pow(10,i),""+(Math.round(t*o)/o).toFixed(i)):""+Math.round(l)).split("."))[0].length&&(f[0]=f[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,u)),(f[1]||"").length<c&&(f[1]=f[1]||"",f[1]+=new Array(c-f[1].length+1).join("0")),f.join(s)}function strlen(e){for(var a=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);1<=r&&r<=126||65376<=r&&r<=65439?a++:a+=2}return a}function substr(e,a,n){var r=(e+="").length;if("off"===(("undefined"!=typeof require?require("../info/ini_get")("unicode.emantics"):void 0)||"off"))return a<0&&(a+=r),void 0!==n&&(r=n<0?n+r:n+a),!(a>=e.length||a<0||r<a)&&e.slice(a,r);var t=0,i=!0,o=0,l=0,c=0,u="";for(t=0;t<e.length;t++)if(/[\uD800-\uDBFF]/.test(e.charAt(t))&&/[\uDC00-\uDFFF]/.test(e.charAt(t+1))){i=!1;break}if(!i){if(a<0)for(t=r-1,o=a+=r;o<=t;t--)/[\uDC00-\uDFFF]/.test(e.charAt(t))&&/[\uD800-\uDBFF]/.test(e.charAt(t-1))&&(a--,o--);else for(var s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;null!==s.exec(e);){if(!(s.lastIndex-2<a))break;a++}if(r<=a||a<0)return!1;if(n<0){for(t=r-1,l=r+=n;l<=t;t--)/[\uDC00-\uDFFF]/.test(e.charAt(t))&&/[\uD800-\uDBFF]/.test(e.charAt(t-1))&&(r--,l--);return!(r<a)&&e.slice(a,r)}for(c=a+n,t=a;t<c;t++)u+=e.charAt(t),/[\uD800-\uDBFF]/.test(e.charAt(t))&&/[\uDC00-\uDFFF]/.test(e.charAt(t+1))&&c++;return u}}function showProvince(e){var a=getProvince(!1),n="";for(var r in a)n+=e.replace("[province]",a[r].province).replace("[attributes]",'data-province="'+a[r].province+'"data-provinceId="'+a[r].province_id+'"');return n}function showCity(e,a){var n=getCity(e),r="";for(var t in n)r+=a.replace("[city]",n[t].city).replace("[attributes]",'data-city="'+n[t].city+'"data-cityId="'+n[t].city_id+'"');return r}function showArea(e,a){var n=getArea(e),r="";for(var t in n)r+=a.replace("[area]",n[t].area).replace("[attributes]",'data-area="'+n[t].area+'"data-areaId="'+n[t].area_id+'"');return r}function gotoMemberLoginPage(){setTimeout(function(){window.location.href=$.ajaxUrl("memberLoginUrl")},3e3)}function updateCartNumber(){$.ajax({type:"POST",url:$.ajaxUrl("ajaxUrlGetCartNumber"),data:{},dataType:"json",success:function(e){if("failure"===e._return){if(e.code&&"110"==e.code)return ajaxError();e.code&&"1"==e.code&&gotoMemberLoginPage(),e.language?layer.alert($.languagePack(e.language),function(e){layer.close(e)}):e.message&&layer.alert(e.message,function(e){layer.close(e)})}else"success"===e._return&&0<$(".w-shopCart").length&&(0<$(".w-shopCart").find("num").length?$(".w-shopCart").find("num").html(e.cartNum):($(".w-shopCart>a").find("span").remove(),$(".w-shopCart>a").append('<span class="num">'+e.cartNum+"</span>")))},error:function(){return ajaxError()}})}function memberAddress(e){if(1==$("input[name='languageId']").val())var a=[{rule:"required",failure:function(a){layer.alert(languagePack("pleaseSelectProvinces"),function(e){a.focus(),layer.close(e)})}}],n=[{rule:"required",failure:function(a){layer.alert(languagePack("pleaseSelectCite"),function(e){a.focus(),layer.close(e)})}}],r=[{rule:"required",failure:function(a){layer.alert(languagePack("pleaseSelectArea"),function(e){a.focus(),layer.close(e)})}}];else a="",n="",r="";return e.formsValidation({forms:{consignee:$("input[name='consignee']"),province:$("input[name='province']"),city:$("input[name='city']"),area:$("input[name='area']"),address:$("input[name='address']"),phone:$("input[name='phone']"),fixed_tel:$("input[name='fixed_tel']"),email:$("input[name='email']"),address_alias:$("input[name='address_alias']"),zip:$("input[name='zip']")},datas:{consignee:$("input[name='consignee']").val(),province:$("input[name='province']").val(),city:$("input[name='city']").val(),area:$("input[name='area']").val(),address:$("input[name='address']").val(),phone:$("input[name='phone']").val(),fixed_tel:$("input[name='fixed_tel']").val(),email:$("input[name='email']").val(),address_alias:$("input[name='address_alias']").val(),zip:$("input[name='zip']").val()},validation:{consignee:[{rule:"required",failure:function(a){layer.alert(languagePack("consigneeCanNotBeEmpty"),function(e){a.focus(),layer.close(e)})}},{rule:"length",max:50,failure:function(a){layer.alert(languagePack("consigneeLengthCanNotExceed50"),function(e){a.focus(),layer.close(e)})}}],province:a,city:n,area:r,address:[{rule:"required",failure:function(a){layer.alert(languagePack("theDetailedAddressCannotBeEmpty"),function(e){a.focus(),layer.close(e)})}},{rule:"length",max:200,failure:function(a){layer.alert(languagePack("theDetailedAddressLengthCanNotExceed200"),function(e){a.focus(),layer.close(e)})}}],phone:[{rule:"required",failure:function(a){layer.alert(languagePack("phoneCannotBeEmpty"),function(e){a.focus(),layer.close(e)})}},{rule:"length",min:6,max:30,failure:function(a){layer.alert($.languagePack("phoneLengthCanNotExceed30"),function(e){a.focus(),layer.close(e)})}}],fixed_tel:[{rule:"length",min:6,max:30,failure:function(a){layer.alert(languagePack("fixedTelLengthCanNotExceed30"),function(e){a.focus(),layer.close(e)})}}],email:[{rule:"email",failure:function(a){layer.alert(languagePack("mailboxFormatError"),function(e){a.focus(),layer.close(e)})}},{rule:"length",max:80,failure:function(a){layer.alert(languagePack("emailLengthCanNotExceed80"),function(e){a.focus(),layer.close(e)})}}],address_alias:[{rule:"length",max:200,failure:function(a){layer.alert(languagePack("theAddressAliasLengthCanNotExceed200"),function(e){a.focus(),layer.close(e)})}}],zip:[{rule:"length",max:20,failure:function(a){layer.alert(languagePack("zipLengthCanNotExceed20"),function(e){a.focus(),layer.close(e)})}}]}})}function languageFill(e){var a=e.match(/^(\/[a-z]{2}\/)/i);return a&&-1==window.location.pathname.indexOf(a[1])?e.replace(a[1],"/"):e}function fileUserdown(e){var a=$(e).data("token");if(a.length<1)return!1;var n=!1;return $.ajax({type:"POST",url:$.ajaxUrl("ajaxUrlComponentFile"),data:{token:a},dataType:"json",async:!1,success:function(e){if("failure"===e._return){if(e.code&&"1"==e.code)return layer.alert($.languagePack(e.language),function(e){layer.close(e)}),!1}else"success"===e._return&&(n=!0)},error:function(){return ajaxError()}}),n}function productFileUserdown(e){var a=$(e).data("token");if(a.length<1)return!1;var n=!1;return $.ajax({type:"POST",url:$.ajaxUrl("ajaxUrlProductsFile"),data:{token:a},dataType:"json",async:!1,success:function(e){if("failure"===e._return){if(e.code&&"1"==e.code)return layer.alert($.languagePack(e.language),function(e){layer.close(e)}),!1}else"success"===e._return&&(n=!0)},error:function(){return ajaxError()}}),n}function fileSystemUserdown(e){var a=$(e).data("token");if(a.length<1)return!1;var n=!1;return $.ajax({type:"POST",url:$.ajaxUrl("ajaxUrlFileSystemDownload"),data:{token:a},dataType:"json",async:!1,success:function(e){if("failure"===e._return){if(e.code&&"1"==e.code)return layer.alert($.languagePack(e.language),function(e){layer.close(e)}),!1}else"success"===e._return&&(n=!0)},error:function(){return ajaxError()}}),n}!function(a){a.extend({linkJump:function(e){return console.log(a("#"+e).length),0<a("#"+e).length&&a("#"+e).click(),""}})}(jQuery),function(l){l.fn.extend({listRow:function(e){for(var a=l(this),n=Math.ceil(a.find(e.rowList).length/e.row),r=0;r<n;r++){for(var t={min:r*e.row,max:(r+1)*e.row},i=0,o=t.min;o<t.max;o++)a.find(e.rowList).eq(o).find(e.rowFind).height()>i&&(i=a.find(e.rowList).eq(o).find(e.rowFind).height());for(o=t.min;o<t.max;o++)a.find(e.rowList).eq(o).find(e.rowFind).height(i)}return""}})}(jQuery);