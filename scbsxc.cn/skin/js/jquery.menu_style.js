!function(m,w){m.fn.extend({menuStyle:function(i){var d=m.extend({parent:".w-nav-in",second:1e3,again:!0},i),o=m(this),t=o.attr("style")?o.attr("style").split(";"):[],s="";for(var e in t)t[e]&&0<t[e].length&&t[e].toLowerCase().indexOf("display")<0&&(s=s+t[e]+";");if(o.children(".active").length<1&&!0===d.again)return setTimeout(function(){d.again=!1,o.menuStyle(d),d.callBack&&d.callBack()},100),"";var l,v=o.parent(d.parent),n=function(){o.attr("style",s)},r=function(i,t){i.removeAttr("style"),t.removeAttr("style"),i.children("li").each(function(i){m(this).removeAttr("style")}),i.next(".g-prev-next-ul").remove(),n(),d.callBack&&d.callBack()};if(o.removeAttr("style"),"boolean"==typeof w.document.menuStyle&&!1===w.document.menuStyle)return n(),d.callBack&&d.callBack(),"";if("Microsoft Internet Explorer"==w.navigator.appName&&"MSIE7.0"==w.navigator.appVersion.split(";")[1].replace(/[ ]/g,""))return n(),d.callBack&&d.callBack(),"";if(v.parent().width()<v.width())var p=v.parent().width();else p=v.width();if(0===p||o.children("li").eq(0).outerWidth(!0)+10>=p)return r(o,v),"";if(!(l=0,o.children("li").each(function(){l+=m(this).outerWidth(!0)}),p+2<l))return r(o,v),"";r(o,v),o.css("visibility","hidden"),m("body").css("overflow-x","hidden"),v.append('<ul data-going="0" class="nav_inner clearfix g-prev-next-ul"><li class="g-prev-li" style="margin-left:1px;margin-right:1px;padding-left:1px;padding-right:1px;float:left;border:0px;"><a href="javascript:void(0);" class="g-prev" style="margin-left:1px;margin-right:1px;padding-left:1px;padding-right:1px;">&#9668</a></li><li class="g-next-li" style="margin-left:1px;margin-right:1px;padding-left:1px;padding-right:1px;float:right;border:0px;"><a href="javascript:void(0);" class="g-next" style="margin-left:1px;margin-right:1px;padding-left:1px;padding-right:1px;">&#9658</a></li></ul>'),0<o.children("li").eq(0).css("min-width").indexOf("%")&&o.children("li").css("min-width",parseInt(p/100*parseFloat(o.children("li").eq(0).css("min-width")))+1+"px");var h=2,a=parseInt(o.css("border-left-width")),c=parseInt(o.css("border-right-width"));isNaN(a)&&(a=0),isNaN(c)&&(c=0),h+=a+c,o.children("li").each(function(i){var t=m(this).outerWidth(!0);h+=t}),h=h+parseInt(o.css("padding-left"))+parseInt(o.css("padding-right")),v.css({overflow:"hidden",width:p+"px",position:"relative"});var f=o.children("li").eq(0).outerHeight(!0)+parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"));o.css({height:f+"px",width:h+"px",position:"relative",left:"0px",top:"0px"});var u=o.next(".g-prev-next-ul"),g=u.children(".g-prev-li").eq(0),x=u.children(".g-next-li").eq(0);0<parseInt(g.css("min-width"))&&g.css("min-width","0px"),0<parseInt(g.children("a").css("min-width"))&&g.children("a").css("min-width","0px"),0<parseInt(x.css("min-width"))&&x.css("min-width","0px"),0<parseInt(x.children("a").css("min-width"))&&x.children("a").css("min-width","0px"),u.css({width:g.outerWidth(!0)+x.outerWidth(!0)+3+"px",position:"absolute",right:"0px",top:"0px"});!function(){v.offset().left,g.outerWidth(!0),x.outerWidth(!0);u.css({right:"0px",top:"0px"})}(),p=p-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right"));var b=function(i,t,s,e){var l=0,n=i-(s.outerWidth(!0)+e.outerWidth(!0)),r=!0;t.children("li").each(function(i){if(m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li"))return"";!0===r?m(this).outerWidth(!0)+l>n?(r=!1,m(this).css("visibility","hidden")):(l+=m(this).outerWidth(!0),m(this).css("visibility","visible")):m(this).css("visibility","hidden")}),v.css("overflow","visible")};!function(i){if(o.children(".active").length<1)return i();var t=!1,s=!1,e=!1,l=0,n=p-(g.outerWidth(!0)+x.outerWidth(!0));if(o.children("li").each(function(i){if(m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li"))return"";m(this).outerWidth(!0)+l>n?!1===s&&(s=!0===e?i-1:(l=m(this).outerWidth(!0),t=i,!1)):(!1===t&&(t=i),l+=m(this).outerWidth(!0)),m(this).hasClass("active")&&(e=!0)}),0===t)i();else{!1===s&&(s=o.children("li").length-1);var r=0,h=!0;o.children("li").each(function(i){if(m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li"))return"";t<=i&&i<=s?(!0===h&&(h=!1),m(this).css("visibility","visible")):(!0===h&&(r+=m(this).outerWidth(!0)),m(this).css("visibility","hidden"))}),o.css({left:"-"+r+"px"}),v.css("overflow","visible")}}(function(){b(p,o,g,x)});var y=function(i,t,s){"visible"===i.children("li").eq(0).css("visibility")?t.css("visibility","hidden"):t.css("visibility","visible"),"visible"===i.children("li").eq(i.children("li").length-1).css("visibility")?s.css("visibility","hidden"):s.css("visibility","visible")};y(o,g,x),x.children(".g-next").click(function(){if("visible"===o.children("li").eq(o.children("li").length-1).css("visibility"))return"";m(this);if(1==u.data("going")||u.is(":animated"))return"";u.data("going","1"),setTimeout(function(){u.data("going","0"),v.css("overflow","visible")},d.second+200),v.css("overflow","hidden");var t=0,s=!1,e=!1;if("hidden"===o.children("li").eq(0).css("visibility")){var l=!0;o.children("li").each(function(i){return m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li")?"":"visible"===m(this).css("visibility")?(l=!1,""):void(!0===l&&(t+=m(this).outerWidth(!0)))})}o.children("li").each(function(i){if(m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li"))return"";"visible"===m(this).css("visibility")&&(!1===e&&(e=i),s=i+1,t+=m(this).outerWidth(!0))});var n=0,r=p-(g.outerWidth(!0)+x.outerWidth(!0)),h=!0;o.children("li").each(function(i){if(m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li"))return"";0!=s&&s<=i&&(!0===h?m(this).outerWidth(!0)+n>r?(h=!1,m(this).css("visibility","hidden")):(n+=m(this).outerWidth(!0),m(this).css("visibility","visible")):m(this).css("visibility","hidden"))}),o.animate({left:"-"+t+"px"},d.second,function(){o.children("li").each(function(i){m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li")||0!=s&&i<s&&m(this).css("visibility","hidden")}),y(o,g,x),v.css("overflow","visible")})}),g.click(function(){if("visible"===o.children("li").eq(0).css("visibility"))return"";m(this);if(1==u.data("going")||u.is(":animated"))return"";u.data("going","1"),setTimeout(function(){u.data("going","0"),v.css("overflow","visible")},d.second+200),v.css("overflow","hidden");var i=parseInt(o.css("left")),t=o.children("li").length-1,s=p-(g.outerWidth(!0)+x.outerWidth(!0)),e=!0,l=0;if(o.children("li").each(function(i){if(m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li"))return"";!0===e&&("hidden"===m(this).css("visibility")?l+=m(this).outerWidth(!0):e=!1)}),l<s)return o.children("li").each(function(i){if(m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li"))return"";m(this).css("visibility","visible")}),o.animate({left:"0px"},d.second,function(){b(p,o,g,x),y(o,g,x)}),"";var n=!1,r=!1,h=0,a=!1;if("visible"===o.children("li").eq(t).css("visibility"))for(var c=t;0<=c;c--)"hidden"===o.children("li").eq(c).css("visibility")&&(!1===n&&(n=c),h+o.children("li").eq(c).outerWidth(!0)>s?!1===r&&(r=c+1):h+=o.children("li").eq(c).outerWidth(!0));else{for(c=t-1;0<=c;c--)!1===a&&"visible"===o.children("li").eq(c).css("visibility")&&(a=!0),!0===a&&"hidden"===o.children("li").eq(c).css("visibility")&&(!1===n&&(n=c),h+o.children("li").eq(c).outerWidth(!0)>s?!1===r&&(r=c+1):h+=o.children("li").eq(c).outerWidth(!0));!1===r&&(r=0,h=Math.abs(i))}o.children("li").each(function(i){if(m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li"))return"";m(this).css("visibility","visible")}),o.animate({left:i+h+"px"},d.second,function(){o.children("li").each(function(i){if(m(this).hasClass("g-prev-li")||m(this).hasClass("g-next-li"))return"";r<=i&&i<=n?m(this).css("visibility","visible"):m(this).css("visibility","hidden")}),y(o,g,x),v.css("overflow","visible")})}),o.css("visibility","visible"),d.callBack&&d.callBack()}})}(jQuery,window);